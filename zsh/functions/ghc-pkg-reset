# remove all installed GHC/cabal packages, leaving ~/.cabal binaries and docs in place.
# When all else fails, use this to get out of dependency hell and start over.

function ghc-pkg-reset() {
  if [ -n "$ZSH_VERSION" ]; then
    read 'ans?Erasing all your user ghc and cabal packages - are you sure (y/N)? '
  else
    read -p 'Erasing all your user ghc and cabal packages - are you sure (y/N)? ' ans
  fi

  if [[ x$ans =~ "xy" ]]; then
    echo 'erasing directories under ~/.ghc'
    command rm -rf `find ~/.ghc/* -maxdepth 1 -type d`
    echo 'erasing ~/.cabal/lib'
    command rm -rf ~/.cabal/lib
  fi
}
